<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zhonghe.adapter.mapper.InsertionErrorLogMapper">
<!-- XML映射文件 -->


<insert id="batchInsertErrors" parameterType="java.util.List">
    INSERT INTO insertion_error_log
    (field_a, error_message, stack_trace, record_data, error_time)
    VALUES
    <foreach collection="list" item="log" separator=",">
        (
        #{log.fieldA},
        #{log.errorMessage},
        #{log.stackTrace},
        #{log.recordData},
        #{log.errorTime}
        )
    </foreach>
</insert>
    <select id="selectByTaskId" resultType="com.zhonghe.adapter.model.InsertionErrorLog">
        SELECT
            id,
            field_a AS fieldA,
            task_id AS taskId,
            error_message AS errorMessage,
            stack_trace AS stackTrace,
            record_data AS recordData,
            error_time AS errorTime,
            created_at AS createdAt
        FROM insertion_error_log
        WHERE task_id = #{taskId}
    </select>
</mapper>