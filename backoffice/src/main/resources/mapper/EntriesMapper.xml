<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhonghe.backoffice.mapper.EntriesMapper">

    <resultMap id="BaseResultMap" type="com.zhonghe.backoffice.model.Entries">
        <id column="id" property="id" jdbcType="BIGINT"/>
        <result column="task_id" property="taskId" jdbcType="BIGINT"/>
        <result column="summary" property="summary" jdbcType="VARCHAR"/>
        <result column="direction" property="direction" jdbcType="VARCHAR"/>
        <result column="amount" property="amount" jdbcType="VARCHAR"/>
        <result column="supplier_related" property="supplierRelated" jdbcType="TINYINT"/>
        <result column="department_accounting" property="departmentAccounting" jdbcType="TINYINT"/>
    </resultMap>

    <sql id="Base_Column_List">
        id, task_id, summary, direction, amount, supplier_related, department_accounting
    </sql>

    <insert id="insert" parameterType="com.zhonghe.backoffice.model.Entries" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO task_voucher_entries (
            task_id, summary, direction, amount, supplier_related, department_accounting
        ) VALUES (
                     #{taskId}, #{summary}, #{direction}, #{amount}, #{supplierRelated}, #{departmentAccounting}
                 )
    </insert>

    <update id="update" parameterType="com.zhonghe.backoffice.model.Entries">
        UPDATE task_voucher_entries
        SET
            task_id = #{taskId},
            summary = #{summary},
            direction = #{direction},
            amount = #{amount},
            supplier_related = #{supplierRelated},
            department_accounting = #{departmentAccounting}
        WHERE id = #{id}
    </update>

    <delete id="deleteById" parameterType="java.lang.Long">
        DELETE FROM task_voucher_entries WHERE id = #{id}
    </delete>

    <select id="selectById" parameterType="java.lang.Long" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM task_voucher_entries
        WHERE id = #{id}
    </select>

    <select id="selectAll" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM task_voucher_entries
    </select>
    <select id="selectByTaskId" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM task_voucher_entries
        WHERE task_id = #{taskId}
    </select>
    <insert id="insertOrUpdate" parameterType="com.zhonghe.backoffice.model.Entries" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO task_voucher_entries (
            id, task_id, summary, direction, amount,
            supplier_related, department_accounting
        ) VALUES (
                     #{id}, #{taskId}, #{summary}, #{direction}, #{amount},
                     #{supplierRelated}, #{departmentAccounting}
                 )
            ON DUPLICATE KEY UPDATE
                                 task_id = VALUES(task_id),
                                 summary = VALUES(summary),
                                 direction = VALUES(direction),
                                 amount = VALUES(amount),
                                 supplier_related = VALUES(supplier_related),
                                 department_accounting = VALUES(department_accounting)
    </insert>
</mapper>